---
import { type CollectionEntry, getCollection } from "astro:content";
import { toSlug } from "../../helpers/url_helpers";

export async function getStaticPaths() {
  const videos = await getCollection("video");
  return videos.map((video) => ({
    params: { id: video.id },
    props: video,
  }));
}
type Props = CollectionEntry<"video">;

const video = Astro.props;

return Astro.redirect(
  `/video/${toSlug(video.data.videoTitle)}--${video.id}`,
  301
);
---
